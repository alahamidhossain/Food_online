{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useParams}from'react-router-dom';import{Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{getOrderDetails}from'../actions/orderActions';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderPage=()=>{var _order$shipping_addre,_order$shipping_addre2,_order$shipping_addre3,_order$shipping_addre4;const{id}=useParams();const dispatch=useDispatch();const orderDetails=useSelector(state=>state.orderDetails);const{order,loading,error}=orderDetails;useEffect(()=>{dispatch(getOrderDetails(id));},[dispatch,id]);// Calculate prices\nconst addDecimals=num=>{return(Math.round(num*100)/100).toFixed(2);};if(loading)return/*#__PURE__*/_jsx(Loader,{});if(error)return/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error});if(!order)return/*#__PURE__*/_jsx(Message,{children:\"Order not found\"});const{orderItems}=order;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Order \",order._id]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),orderItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Order is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:orderItems.map((item,index)=>/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.menu_item_id.image_url||'/images/default-food.jpg',alt:item.menu_item_id.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:`/menu/${item.menu_item_id._id}`,children:item.menu_item_id.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.quantity,\" x $\",item.price,\" = $\",addDecimals(item.quantity*item.price)]})]}),item.customizations&&/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{span:11,offset:1},children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Special Instructions:\"}),\" \",item.customizations]})})})]},index))})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Delivery Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type: \"}),order.delivery_type]}),order.delivery_type==='delivery'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),(_order$shipping_addre=order.shipping_address)===null||_order$shipping_addre===void 0?void 0:_order$shipping_addre.address,\", \",(_order$shipping_addre2=order.shipping_address)===null||_order$shipping_addre2===void 0?void 0:_order$shipping_addre2.city,' ',(_order$shipping_addre3=order.shipping_address)===null||_order$shipping_addre3===void 0?void 0:_order$shipping_addre3.postalCode,\", \",(_order$shipping_addre4=order.shipping_address)===null||_order$shipping_addre4===void 0?void 0:_order$shipping_addre4.country]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status: \"}),/*#__PURE__*/_jsx(\"span\",{className:order.status==='completed'?'text-success':order.status==='cancelled'?'text-danger':'text-warning',children:order.status})]}),order.delivery_eta&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estimated Delivery: \"}),new Date(order.delivery_eta).toLocaleString()]})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",addDecimals(order.total_price)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",addDecimals(order.total_price)]})]})})]})})})]})]});};export default OrderPage;","map":{"version":3,"names":["React","useEffect","Link","useParams","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","Message","Loader","getOrderDetails","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderPage","_order$shipping_addre","_order$shipping_addre2","_order$shipping_addre3","_order$shipping_addre4","id","dispatch","orderDetails","state","order","loading","error","addDecimals","num","Math","round","toFixed","variant","children","orderItems","_id","md","Item","length","map","item","index","src","menu_item_id","image_url","alt","name","fluid","rounded","to","quantity","price","customizations","span","offset","className","delivery_type","shipping_address","address","city","postalCode","country","status","delivery_eta","Date","toLocaleString","total_price"],"sources":["C:/Users/HP/CascadeProjects/food-ordering-system/client/src/pages/OrderPage.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { getOrderDetails } from '../actions/orderActions';\n\nconst OrderPage = () => {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n\n  const orderDetails = useSelector((state) => state.orderDetails);\n  const { order, loading, error } = orderDetails;\n\n  useEffect(() => {\n    dispatch(getOrderDetails(id));\n  }, [dispatch, id]);\n\n  // Calculate prices\n  const addDecimals = (num) => {\n    return (Math.round(num * 100) / 100).toFixed(2);\n  };\n\n  if (loading) return <Loader />;\n  if (error) return <Message variant=\"danger\">{error}</Message>;\n  if (!order) return <Message>Order not found</Message>;\n\n  const { orderItems } = order;\n\n  return (\n    <>\n      <h1>Order {order._id}</h1>\n      <Row>\n        <Col md={8}>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>Order Items</h2>\n              {orderItems.length === 0 ? (\n                <Message>Order is empty</Message>\n              ) : (\n                <ListGroup variant=\"flush\">\n                  {orderItems.map((item, index) => (\n                    <ListGroup.Item key={index}>\n                      <Row>\n                        <Col md={1}>\n                          <Image\n                            src={item.menu_item_id.image_url || '/images/default-food.jpg'}\n                            alt={item.menu_item_id.name}\n                            fluid\n                            rounded\n                          />\n                        </Col>\n                        <Col>\n                          <Link to={`/menu/${item.menu_item_id._id}`}>\n                            {item.menu_item_id.name}\n                          </Link>\n                        </Col>\n                        <Col md={4}>\n                          {item.quantity} x ${item.price} = ${addDecimals(item.quantity * item.price)}\n                        </Col>\n                      </Row>\n                      {item.customizations && (\n                        <Row>\n                          <Col md={{ span: 11, offset: 1 }}>\n                            <small className=\"text-muted\">\n                              <strong>Special Instructions:</strong> {item.customizations}\n                            </small>\n                          </Col>\n                        </Row>\n                      )}\n                    </ListGroup.Item>\n                  ))}\n                </ListGroup>\n              )}\n            </ListGroup.Item>\n\n            <ListGroup.Item>\n              <h2>Delivery Information</h2>\n              <p>\n                <strong>Type: </strong>\n                {order.delivery_type}\n              </p>\n              {order.delivery_type === 'delivery' && (\n                <p>\n                  <strong>Address: </strong>\n                  {order.shipping_address?.address}, {order.shipping_address?.city}{' '}\n                  {order.shipping_address?.postalCode}, {order.shipping_address?.country}\n                </p>\n              )}\n              <p>\n                <strong>Status: </strong>\n                <span className={\n                  order.status === 'completed' \n                    ? 'text-success' \n                    : order.status === 'cancelled' \n                    ? 'text-danger' \n                    : 'text-warning'\n                }>\n                  {order.status}\n                </span>\n              </p>\n              {order.delivery_eta && (\n                <p>\n                  <strong>Estimated Delivery: </strong>\n                  {new Date(order.delivery_eta).toLocaleString()}\n                </p>\n              )}\n            </ListGroup.Item>\n          </ListGroup>\n        </Col>\n        <Col md={4}>\n          <Card>\n            <ListGroup variant=\"flush\">\n              <ListGroup.Item>\n                <h2>Order Summary</h2>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Items</Col>\n                  <Col>${addDecimals(order.total_price)}</Col>\n                </Row>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Total</Col>\n                  <Col>${addDecimals(order.total_price)}</Col>\n                </Row>\n              </ListGroup.Item>\n            </ListGroup>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default OrderPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}