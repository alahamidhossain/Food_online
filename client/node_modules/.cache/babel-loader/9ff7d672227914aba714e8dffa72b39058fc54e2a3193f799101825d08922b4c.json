{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{Row,Col,Card}from'react-bootstrap';import{useSelector}from'react-redux';import axios from'axios';import Loader from'../components/Loader';import Message from'../components/Message';import AdminNav from'../components/AdminNav';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboardPage=()=>{const[stats,setStats]=useState({totalOrders:0,pendingOrders:0,totalUsers:0,totalMenuItems:0,revenue:0});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;useEffect(()=>{// Check if user is admin\nif(!userInfo||userInfo.role!=='admin'){navigate('/login');return;}const fetchStats=async()=>{try{setLoading(true);// Fetch orders\nconst ordersRes=await axios.get('/api/orders',{headers:{Authorization:`Bearer ${userInfo.token}`}});// Fetch users\nconst usersRes=await axios.get('/api/users',{headers:{Authorization:`Bearer ${userInfo.token}`}});// Fetch menu items\nconst menuItemsRes=await axios.get('/api/menu-items');// Calculate stats\nconst orders=ordersRes.data;const pendingOrders=orders.filter(order=>order.status!=='completed'&&order.status!=='cancelled');const revenue=orders.filter(order=>order.status==='completed').reduce((sum,order)=>sum+order.total_price,0);setStats({totalOrders:orders.length,pendingOrders:pendingOrders.length,totalUsers:usersRes.data.length,totalMenuItems:menuItemsRes.data.length,revenue});setLoading(false);}catch(error){setError(error.response&&error.response.data.message?error.response.data.message:error.message);setLoading(false);}};fetchStats();},[userInfo,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{className:\"align-items-center\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"})})}),/*#__PURE__*/_jsx(AdminNav,{}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Row,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Card,{className:\"bg-primary text-white mb-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Orders\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"display-4\",children:stats.totalOrders})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"d-flex align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"small text-white\",children:\"Total Orders\"})})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Card,{className:\"bg-warning text-white mb-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Pending\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"display-4\",children:stats.pendingOrders})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"d-flex align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"small text-white\",children:\"Pending Orders\"})})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Card,{className:\"bg-success text-white mb-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Revenue\"}),/*#__PURE__*/_jsxs(Card.Text,{className:\"display-4\",children:[\"$\",stats.revenue.toFixed(2)]})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"d-flex align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"small text-white\",children:\"Total Revenue\"})})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Card,{className:\"bg-info text-white mb-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Users\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"display-4\",children:stats.totalUsers})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"d-flex align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"small text-white\",children:\"Registered Users\"})})]})})]})]});};export default AdminDashboardPage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Row","Col","Card","useSelector","axios","Loader","Message","AdminNav","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboardPage","stats","setStats","totalOrders","pendingOrders","totalUsers","totalMenuItems","revenue","loading","setLoading","error","setError","navigate","userLogin","state","userInfo","role","fetchStats","ordersRes","get","headers","Authorization","token","usersRes","menuItemsRes","orders","data","filter","order","status","reduce","sum","total_price","length","response","message","children","className","variant","md","Body","Title","Text","Footer","toFixed"],"sources":["C:/Users/HP/CascadeProjects/food-ordering-system/client/src/pages/AdminDashboardPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Row, Col, Card } from 'react-bootstrap';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport AdminNav from '../components/AdminNav';\n\nconst AdminDashboardPage = () => {\n  const [stats, setStats] = useState({\n    totalOrders: 0,\n    pendingOrders: 0,\n    totalUsers: 0,\n    totalMenuItems: 0,\n    revenue: 0,\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const navigate = useNavigate();\n  \n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  useEffect(() => {\n    // Check if user is admin\n    if (!userInfo || userInfo.role !== 'admin') {\n      navigate('/login');\n      return;\n    }\n\n    const fetchStats = async () => {\n      try {\n        setLoading(true);\n        \n        // Fetch orders\n        const ordersRes = await axios.get('/api/orders', {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n        \n        // Fetch users\n        const usersRes = await axios.get('/api/users', {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n        \n        // Fetch menu items\n        const menuItemsRes = await axios.get('/api/menu-items');\n        \n        // Calculate stats\n        const orders = ordersRes.data;\n        const pendingOrders = orders.filter(\n          (order) => order.status !== 'completed' && order.status !== 'cancelled'\n        );\n        const revenue = orders\n          .filter((order) => order.status === 'completed')\n          .reduce((sum, order) => sum + order.total_price, 0);\n        \n        setStats({\n          totalOrders: orders.length,\n          pendingOrders: pendingOrders.length,\n          totalUsers: usersRes.data.length,\n          totalMenuItems: menuItemsRes.data.length,\n          revenue,\n        });\n        \n        setLoading(false);\n      } catch (error) {\n        setError(\n          error.response && error.response.data.message\n            ? error.response.data.message\n            : error.message\n        );\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, [userInfo, navigate]);\n\n  return (\n    <>\n      <Row className=\"align-items-center\">\n        <Col>\n          <h1>Dashboard</h1>\n        </Col>\n      </Row>\n      \n      <AdminNav />\n      \n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Row className=\"mt-4\">\n          <Col md={3}>\n            <Card className=\"bg-primary text-white mb-4\">\n              <Card.Body>\n                <Card.Title>Orders</Card.Title>\n                <Card.Text className=\"display-4\">{stats.totalOrders}</Card.Text>\n              </Card.Body>\n              <Card.Footer className=\"d-flex align-items-center justify-content-between\">\n                <div className=\"small text-white\">Total Orders</div>\n              </Card.Footer>\n            </Card>\n          </Col>\n          \n          <Col md={3}>\n            <Card className=\"bg-warning text-white mb-4\">\n              <Card.Body>\n                <Card.Title>Pending</Card.Title>\n                <Card.Text className=\"display-4\">{stats.pendingOrders}</Card.Text>\n              </Card.Body>\n              <Card.Footer className=\"d-flex align-items-center justify-content-between\">\n                <div className=\"small text-white\">Pending Orders</div>\n              </Card.Footer>\n            </Card>\n          </Col>\n          \n          <Col md={3}>\n            <Card className=\"bg-success text-white mb-4\">\n              <Card.Body>\n                <Card.Title>Revenue</Card.Title>\n                <Card.Text className=\"display-4\">${stats.revenue.toFixed(2)}</Card.Text>\n              </Card.Body>\n              <Card.Footer className=\"d-flex align-items-center justify-content-between\">\n                <div className=\"small text-white\">Total Revenue</div>\n              </Card.Footer>\n            </Card>\n          </Col>\n          \n          <Col md={3}>\n            <Card className=\"bg-info text-white mb-4\">\n              <Card.Body>\n                <Card.Title>Users</Card.Title>\n                <Card.Text className=\"display-4\">{stats.totalUsers}</Card.Text>\n              </Card.Body>\n              <Card.Footer className=\"d-flex align-items-center justify-content-between\">\n                <div className=\"small text-white\">Registered Users</div>\n              </Card.Footer>\n            </Card>\n          </Col>\n        </Row>\n      )}\n    </>\n  );\n};\n\nexport default AdminDashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}