{"ast":null,"code":"import axios from 'axios';\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_UPDATE_ITEM_QUANTITY, CART_SAVE_SHIPPING_ADDRESS, CART_SAVE_PAYMENT_METHOD, CART_CLEAR_ITEMS, CART_APPLY_COUPON, CART_REMOVE_COUPON } from '../constants/cartConstants';\n\n// Add item to cart action\nexport const addToCart = (id, quantity, specialInstructions = '') => async (dispatch, getState) => {\n  const {\n    data\n  } = await axios.get(`/api/menu-items/${id}`);\n  dispatch({\n    type: CART_ADD_ITEM,\n    payload: {\n      menuItem: data._id,\n      name: data.name,\n      image: data.image_url,\n      price: data.price,\n      qty: quantity,\n      specialInstructions\n    }\n  });\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Update cart item quantity action\nexport const updateCartItemQuantity = (id, qty) => (dispatch, getState) => {\n  dispatch({\n    type: CART_UPDATE_ITEM_QUANTITY,\n    payload: {\n      menuItem: id,\n      qty\n    }\n  });\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Remove item from cart action\nexport const removeFromCart = id => (dispatch, getState) => {\n  dispatch({\n    type: CART_REMOVE_ITEM,\n    payload: id\n  });\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Save shipping address action\nexport const saveShippingAddress = data => dispatch => {\n  dispatch({\n    type: CART_SAVE_SHIPPING_ADDRESS,\n    payload: data\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\n};\n\n// Save payment method action\nexport const savePaymentMethod = data => dispatch => {\n  dispatch({\n    type: CART_SAVE_PAYMENT_METHOD,\n    payload: data\n  });\n  localStorage.setItem('paymentMethod', JSON.stringify(data));\n};\n\n// Apply coupon action\nexport const applyCoupon = couponCode => async (dispatch, getState) => {\n  try {\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/coupons/validate', {\n      code: couponCode\n    }, config);\n    if (data.valid) {\n      dispatch({\n        type: CART_APPLY_COUPON,\n        payload: {\n          code: couponCode,\n          discountPercent: data.discount_percent\n        }\n      });\n      localStorage.setItem('coupon', JSON.stringify({\n        code: couponCode,\n        discountPercent: data.discount_percent\n      }));\n    } else {\n      throw new Error(data.message);\n    }\n  } catch (error) {\n    throw new Error(error.response && error.response.data.message ? error.response.data.message : error.message);\n  }\n};\n\n// Remove coupon action\nexport const removeCoupon = () => dispatch => {\n  dispatch({\n    type: CART_REMOVE_COUPON\n  });\n  localStorage.removeItem('coupon');\n};\n\n// Clear cart items action\nexport const clearCart = () => dispatch => {\n  dispatch({\n    type: CART_CLEAR_ITEMS\n  });\n  localStorage.removeItem('cartItems');\n};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_UPDATE_ITEM_QUANTITY","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","CART_CLEAR_ITEMS","CART_APPLY_COUPON","CART_REMOVE_COUPON","addToCart","id","quantity","specialInstructions","dispatch","getState","data","get","type","payload","menuItem","_id","name","image","image_url","price","qty","localStorage","setItem","JSON","stringify","cart","cartItems","updateCartItemQuantity","removeFromCart","saveShippingAddress","savePaymentMethod","applyCoupon","couponCode","userLogin","userInfo","config","headers","Authorization","token","post","code","valid","discountPercent","discount_percent","Error","message","error","response","removeCoupon","removeItem","clearCart"],"sources":["C:/Users/HP/CascadeProjects/food-ordering-system/client/src/actions/cartActions.js"],"sourcesContent":["import axios from 'axios';\nimport {\n  CART_ADD_ITEM,\n  CART_REMOVE_ITEM,\n  CART_UPDATE_ITEM_QUANTITY,\n  CART_SAVE_SHIPPING_ADDRESS,\n  CART_SAVE_PAYMENT_METHOD,\n  CART_CLEAR_ITEMS,\n  CART_APPLY_COUPON,\n  CART_REMOVE_COUPON\n} from '../constants/cartConstants';\n\n// Add item to cart action\nexport const addToCart = (id, quantity, specialInstructions = '') => async (dispatch, getState) => {\n  const { data } = await axios.get(`/api/menu-items/${id}`);\n\n  dispatch({\n    type: CART_ADD_ITEM,\n    payload: {\n      menuItem: data._id,\n      name: data.name,\n      image: data.image_url,\n      price: data.price,\n      qty: quantity,\n      specialInstructions,\n    },\n  });\n\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Update cart item quantity action\nexport const updateCartItemQuantity = (id, qty) => (dispatch, getState) => {\n  dispatch({\n    type: CART_UPDATE_ITEM_QUANTITY,\n    payload: {\n      menuItem: id,\n      qty,\n    },\n  });\n\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Remove item from cart action\nexport const removeFromCart = (id) => (dispatch, getState) => {\n  dispatch({\n    type: CART_REMOVE_ITEM,\n    payload: id,\n  });\n\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\n// Save shipping address action\nexport const saveShippingAddress = (data) => (dispatch) => {\n  dispatch({\n    type: CART_SAVE_SHIPPING_ADDRESS,\n    payload: data,\n  });\n\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\n};\n\n// Save payment method action\nexport const savePaymentMethod = (data) => (dispatch) => {\n  dispatch({\n    type: CART_SAVE_PAYMENT_METHOD,\n    payload: data,\n  });\n\n  localStorage.setItem('paymentMethod', JSON.stringify(data));\n};\n\n// Apply coupon action\nexport const applyCoupon = (couponCode) => async (dispatch, getState) => {\n  try {\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n\n    const { data } = await axios.post(\n      '/api/coupons/validate',\n      { code: couponCode },\n      config\n    );\n\n    if (data.valid) {\n      dispatch({\n        type: CART_APPLY_COUPON,\n        payload: {\n          code: couponCode,\n          discountPercent: data.discount_percent,\n        },\n      });\n\n      localStorage.setItem('coupon', JSON.stringify({\n        code: couponCode,\n        discountPercent: data.discount_percent,\n      }));\n    } else {\n      throw new Error(data.message);\n    }\n  } catch (error) {\n    throw new Error(\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message\n    );\n  }\n};\n\n// Remove coupon action\nexport const removeCoupon = () => (dispatch) => {\n  dispatch({\n    type: CART_REMOVE_COUPON,\n  });\n\n  localStorage.removeItem('coupon');\n};\n\n// Clear cart items action\nexport const clearCart = () => (dispatch) => {\n  dispatch({\n    type: CART_CLEAR_ITEMS,\n  });\n\n  localStorage.removeItem('cartItems');\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}